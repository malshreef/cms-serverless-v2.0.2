{
	"info": {
		"_postman_id": "s7abt-admin-cms-api",
		"name": "S7abt Admin CMS API",
		"description": "Complete API collection for S7abt Admin Dashboard CMS - Phase 3\n\n## Features\n- Articles CRUD operations\n- Sections management\n- Tags management\n- S3 image upload\n- Automated tests\n- Environment variables\n\n## Setup\n1. Import this collection\n2. Import the environment file\n3. Set your API endpoint in environment\n4. Run requests!\n\n## Author\nS7abt Team\n\n## Version\n3.0.0",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Articles",
			"item": [
				{
					"name": "List Articles",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has success field\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('success');",
									"    pm.expect(jsonData.success).to.be.true;",
									"});",
									"",
									"pm.test(\"Response has articles array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('articles');",
									"    pm.expect(jsonData.data.articles).to.be.an('array');",
									"});",
									"",
									"pm.test(\"Response has pagination\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('pagination');",
									"});",
									"",
									"// Save first article ID for other tests",
									"if (pm.response.json().data.articles.length > 0) {",
									"    pm.environment.set(\"article_id\", pm.response.json().data.articles[0].id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/admin/articles?page=1&limit=20&status=published",
							"host": ["{{base_url}}"],
							"path": ["admin", "articles"],
							"query": [
								{
									"key": "page",
									"value": "1",
									"description": "Page number (default: 1)"
								},
								{
									"key": "limit",
									"value": "20",
									"description": "Items per page (default: 20)"
								},
								{
									"key": "status",
									"value": "published",
									"description": "Filter by status: published, draft, all",
									"disabled": true
								},
								{
									"key": "section_id",
									"value": "1",
									"description": "Filter by section ID",
									"disabled": true
								},
								{
									"key": "search",
									"value": "AWS",
									"description": "Search in title and content",
									"disabled": true
								}
							]
						},
						"description": "Get a paginated list of articles with optional filters.\n\n### Query Parameters\n- `page` (number): Page number (default: 1)\n- `limit` (number): Items per page (default: 20, max: 100)\n- `status` (string): Filter by status (published, draft, all)\n- `section_id` (number): Filter by section ID\n- `search` (string): Search in title and content\n\n### Response\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"articles\": [...],\n    \"pagination\": {\n      \"page\": 1,\n      \"limit\": 20,\n      \"total\": 42,\n      \"totalPages\": 3\n    }\n  }\n}\n```"
					},
					"response": []
				},
				{
					"name": "Get Article",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has article data\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data).to.have.property('id');",
									"    pm.expect(jsonData.data).to.have.property('title');",
									"    pm.expect(jsonData.data).to.have.property('sections');",
									"});",
									"",
									"pm.test(\"Article has sections array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.sections).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/admin/articles/{{article_id}}",
							"host": ["{{base_url}}"],
							"path": ["admin", "articles", "{{article_id}}"]
						},
						"description": "Get a single article by ID with all details.\n\n### Path Parameters\n- `id` (number): Article ID\n\n### Response\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": 1,\n    \"title\": \"مقدمة إلى AWS Lambda\",\n    \"slug\": \"intro-to-aws-lambda\",\n    \"excerpt\": \"تعرف على AWS Lambda\",\n    \"sections\": [\n      {\n        \"title\": \"ما هي AWS Lambda؟\",\n        \"content\": \"<p>AWS Lambda...</p>\"\n      }\n    ],\n    \"mainImage\": \"lambda.png\",\n    \"status\": \"published\",\n    \"views\": 150,\n    \"userId\": 1,\n    \"sectionId\": 2,\n    \"tags\": [1, 5, 7],\n    \"createdAt\": \"2025-10-19T10:00:00Z\",\n    \"updatedAt\": \"2025-10-19T12:00:00Z\"\n  }\n}\n```"
					},
					"response": []
				},
				{
					"name": "Create Article",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Article created successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data).to.have.property('id');",
									"    pm.expect(jsonData.data).to.have.property('slug');",
									"});",
									"",
									"// Save created article ID",
									"pm.environment.set(\"created_article_id\", pm.response.json().data.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"title\": \"مقدمة إلى AWS Lambda\",\n  \"slug\": \"intro-to-aws-lambda\",\n  \"excerpt\": \"تعرف على AWS Lambda وكيفية استخدامها في تطبيقاتك\",\n  \"sections\": [\n    {\n      \"title\": \"ما هي AWS Lambda؟\",\n      \"content\": \"<p>AWS Lambda هي خدمة حوسبة بدون خادم تتيح لك تشغيل التعليمات البرمجية دون الحاجة إلى إدارة الخوادم.</p>\"\n    },\n    {\n      \"title\": \"الفوائد الرئيسية\",\n      \"content\": \"<p>توفر Lambda العديد من الفوائد مثل التوسع التلقائي والدفع حسب الاستخدام.</p>\"\n    }\n  ],\n  \"mainImage\": \"lambda-intro.png\",\n  \"status\": \"published\",\n  \"userId\": 1,\n  \"sectionId\": 2,\n  \"tagIds\": [1, 5, 7]\n}"
						},
						"url": {
							"raw": "{{base_url}}/admin/articles",
							"host": ["{{base_url}}"],
							"path": ["admin", "articles"]
						},
						"description": "Create a new article.\n\n### Request Body\n```json\n{\n  \"title\": \"string (required)\",\n  \"slug\": \"string (optional, auto-generated)\",\n  \"excerpt\": \"string (optional)\",\n  \"sections\": [\n    {\n      \"title\": \"string\",\n      \"content\": \"string (HTML)\"\n    }\n  ],\n  \"mainImage\": \"string (optional)\",\n  \"status\": \"published|draft (default: draft)\",\n  \"userId\": \"number (required)\",\n  \"sectionId\": \"number (required)\",\n  \"tagIds\": [1, 2, 3]\n}\n```\n\n### Response\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": 43,\n    \"slug\": \"intro-to-aws-lambda\",\n    \"message\": \"Article created successfully\"\n  }\n}\n```"
					},
					"response": []
				},
				{
					"name": "Update Article",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Article updated successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data.message).to.include('updated');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"title\": \"مقدمة محدثة إلى AWS Lambda\",\n  \"status\": \"published\",\n  \"sections\": [\n    {\n      \"title\": \"ما هي AWS Lambda؟ (محدث)\",\n      \"content\": \"<p>AWS Lambda هي خدمة حوسبة بدون خادم محدثة...</p>\"\n    }\n  ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/admin/articles/{{created_article_id}}",
							"host": ["{{base_url}}"],
							"path": ["admin", "articles", "{{created_article_id}}"]
						},
						"description": "Update an existing article. Supports partial updates.\n\n### Path Parameters\n- `id` (number): Article ID\n\n### Request Body\nAll fields are optional. Only include fields you want to update.\n\n```json\n{\n  \"title\": \"string\",\n  \"slug\": \"string\",\n  \"excerpt\": \"string\",\n  \"sections\": [...],\n  \"mainImage\": \"string\",\n  \"status\": \"published|draft\",\n  \"sectionId\": \"number\",\n  \"tagIds\": [1, 2, 3]\n}\n```\n\n### Response\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": 43,\n    \"message\": \"Article updated successfully\"\n  }\n}\n```"
					},
					"response": []
				},
				{
					"name": "Delete Article",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Article deleted successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data.message).to.include('deleted');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/admin/articles/{{created_article_id}}",
							"host": ["{{base_url}}"],
							"path": ["admin", "articles", "{{created_article_id}}"]
						},
						"description": "Delete an article (soft delete).\n\n### Path Parameters\n- `id` (number): Article ID\n\n### Response\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": 43,\n    \"message\": \"Article deleted successfully\"\n  }\n}\n```\n\n### Note\nThis is a soft delete. The article is marked as deleted but not removed from the database."
					},
					"response": []
				},
				{
					"name": "Get Image Upload URL",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has upload URL\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data).to.have.property('uploadUrl');",
									"    pm.expect(jsonData.data).to.have.property('fileUrl');",
									"    pm.expect(jsonData.data).to.have.property('key');",
									"});",
									"",
									"// Save upload URL for image upload",
									"pm.environment.set(\"upload_url\", pm.response.json().data.uploadUrl);",
									"pm.environment.set(\"file_url\", pm.response.json().data.fileUrl);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"fileName\": \"article-image.png\",\n  \"fileType\": \"image/png\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/admin/articles/image-upload-url",
							"host": ["{{base_url}}"],
							"path": ["admin", "articles", "image-upload-url"]
						},
						"description": "Get a presigned S3 URL for uploading images.\n\n### Request Body\n```json\n{\n  \"fileName\": \"string (required)\",\n  \"fileType\": \"string (required, e.g., image/png, image/jpeg)\"\n}\n```\n\n### Response\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"uploadUrl\": \"https://s3.amazonaws.com/...\",\n    \"fileUrl\": \"https://s3.amazonaws.com/<your-s3-bucket>/articles/...\",\n    \"key\": \"articles/1234567890-article-image.png\"\n  }\n}\n```\n\n### Usage\n1. Call this endpoint to get upload URL\n2. Use the `uploadUrl` to PUT your image file\n3. Save the `fileUrl` or `key` in your article"
					},
					"response": []
				}
			],
			"description": "Articles CRUD operations"
		},
		{
			"name": "Sections",
			"item": [
				{
					"name": "List Sections",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has sections array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data.sections).to.be.an('array');",
									"});",
									"",
									"// Save first section ID",
									"if (pm.response.json().data.sections.length > 0) {",
									"    pm.environment.set(\"section_id\", pm.response.json().data.sections[0].id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/admin/sections",
							"host": ["{{base_url}}"],
							"path": ["admin", "sections"]
						},
						"description": "Get all sections with article counts.\n\n### Response\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"sections\": [\n      {\n        \"id\": 1,\n        \"name\": \"AWS\",\n        \"slug\": \"aws\",\n        \"description\": \"Amazon Web Services articles\",\n        \"active\": true,\n        \"order\": 1,\n        \"articleCount\": 25\n      }\n    ]\n  }\n}\n```"
					},
					"response": []
				},
				{
					"name": "Create Section",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Section created successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data).to.have.property('id');",
									"});",
									"",
									"pm.environment.set(\"created_section_id\", pm.response.json().data.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Kubernetes\",\n  \"slug\": \"kubernetes\",\n  \"description\": \"مقالات عن Kubernetes وإدارة الحاويات\",\n  \"active\": true,\n  \"order\": 5\n}"
						},
						"url": {
							"raw": "{{base_url}}/admin/sections",
							"host": ["{{base_url}}"],
							"path": ["admin", "sections"]
						},
						"description": "Create a new section.\n\n### Request Body\n```json\n{\n  \"name\": \"string (required)\",\n  \"slug\": \"string (optional, auto-generated)\",\n  \"description\": \"string (optional)\",\n  \"active\": \"boolean (default: true)\",\n  \"order\": \"number (optional)\"\n}\n```"
					},
					"response": []
				},
				{
					"name": "Update Section",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Section updated successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Kubernetes & Container Orchestration\",\n  \"description\": \"مقالات محدثة عن Kubernetes\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/admin/sections/{{created_section_id}}",
							"host": ["{{base_url}}"],
							"path": ["admin", "sections", "{{created_section_id}}"]
						},
						"description": "Update an existing section. Supports partial updates."
					},
					"response": []
				},
				{
					"name": "Delete Section",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Section deleted successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/admin/sections/{{created_section_id}}",
							"host": ["{{base_url}}"],
							"path": ["admin", "sections", "{{created_section_id}}"]
						},
						"description": "Delete a section (soft delete). Cannot delete if section has articles."
					},
					"response": []
				}
			],
			"description": "Sections management"
		},
		{
			"name": "Tags",
			"item": [
				{
					"name": "List Tags",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has tags array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data.tags).to.be.an('array');",
									"});",
									"",
									"// Save first tag ID",
									"if (pm.response.json().data.tags.length > 0) {",
									"    pm.environment.set(\"tag_id\", pm.response.json().data.tags[0].id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/admin/tags",
							"host": ["{{base_url}}"],
							"path": ["admin", "tags"]
						},
						"description": "Get all tags with article counts.\n\n### Response\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"tags\": [\n      {\n        \"id\": 1,\n        \"name\": \"AWS\",\n        \"slug\": \"aws\",\n        \"articleCount\": 15\n      }\n    ]\n  }\n}\n```"
					},
					"response": []
				},
				{
					"name": "Create Tag",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Tag created successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.data).to.have.property('id');",
									"});",
									"",
									"pm.environment.set(\"created_tag_id\", pm.response.json().data.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Serverless\",\n  \"slug\": \"serverless\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/admin/tags",
							"host": ["{{base_url}}"],
							"path": ["admin", "tags"]
						},
						"description": "Create a new tag.\n\n### Request Body\n```json\n{\n  \"name\": \"string (required)\",\n  \"slug\": \"string (optional, auto-generated)\"\n}\n```"
					},
					"response": []
				},
				{
					"name": "Update Tag",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Tag updated successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Serverless Computing\",\n  \"slug\": \"serverless-computing\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/admin/tags/{{created_tag_id}}",
							"host": ["{{base_url}}"],
							"path": ["admin", "tags", "{{created_tag_id}}"]
						},
						"description": "Update an existing tag."
					},
					"response": []
				},
				{
					"name": "Delete Tag",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Tag deleted successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/admin/tags/{{created_tag_id}}",
							"host": ["{{base_url}}"],
							"path": ["admin", "tags", "{{created_tag_id}}"]
						},
						"description": "Delete a tag. Also removes all article-tag associations."
					},
					"response": []
				}
			],
			"description": "Tags management"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Add timestamp to requests",
					"pm.globals.set(\"timestamp\", new Date().toISOString());"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Global test - check response time",
					"pm.test(\"Response time is less than 5000ms\", function () {",
					"    pm.expect(pm.response.responseTime).to.be.below(5000);",
					"});",
					"",
					"// Global test - check content type",
					"pm.test(\"Content-Type is application/json\", function () {",
					"    pm.response.to.have.header(\"Content-Type\");",
					"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
					"});"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "https://<your-api-id>.execute-api.me-central-1.amazonaws.com/dev",
			"type": "string"
		}
	]
}

